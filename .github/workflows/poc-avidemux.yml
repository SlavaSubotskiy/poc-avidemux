name: PoC AviDemux
on: [workflow_dispatch]
jobs:
  PoC-AviDemux:
    runs-on: ubuntu-latest  # jlesage/avidemux:v1.4.0
    container:
      image: jlesage/avidemux:v1.4.0
    env:
      GDRIVE_SERVICE_ACCOUNT: ${{ secrets.GDRIVE_SERVICE_ACCOUNT }}
      GDRIVE_PARENT_FOLDER: 1ZWvA_FvC1GrHcDg8hdid6NsgLLqljvFn
    steps:
      - run: wget https://github.com/prasmussen/gdrive/releases/download/2.1.1/gdrive_2.1.1_linux_amd64.tar.gz -O - | tar -xzvf -
      - run: mkdir /github/home/.gdrive
      - run: 'echo "${GDRIVE_SERVICE_ACCOUNT}" > $HOME/.gdrive/GDRIVE_SERVICE_ACCOUNT.json'
      - run: ./gdrive --service-account GDRIVE_SERVICE_ACCOUNT.json upload -p "${GDRIVE_PARENT_FOLDER}" README.md
#      - run: mkdir source_video
#      - run: gdown --fuzzy 'https://drive.google.com/file/d/1JqJTKToAfPhMb6l4VfB7eretVuZdwHHR/view' -O ./source_video/12002-05-05-Sahasrara-Puja-Talk.mp4
#      - run: ls -la ./source_video/
